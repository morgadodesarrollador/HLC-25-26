FROM ubuntu
ARG USUARIO
RUN apt update && apt install -yq --no-install-recommends \
     nano \
     git curl  wget \
     iputils-ping net-tools \ 
     sudo

RUN mkdir /root/admin
RUN COPY ./dockerfiles/base/admin/start.sh /root/admin
RUN chmod +x /root/admin/start.sh

RUN useradd -rm -d /home/${USUARIO} -s /bin/bash ${USUARIO}
RUN echo "${USUARIO}:1234" | chpasswd
RUN echo "Bienvenido ${USUARIO} a la empresa" > /home/${USUARIO}/hello.txt

# el primer comando que use el contenedor para mantenerse vivo
#CMD ["tail", "-f", "/dev/null"]

ENTRYPOINT [ "/root/admin/start.sh" ]